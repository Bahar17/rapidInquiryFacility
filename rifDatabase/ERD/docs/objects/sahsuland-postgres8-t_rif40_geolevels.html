<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<title>Table: t_rif40_geolevels</title>
<link href="../schema.css" rel="stylesheet" type="text/css">
</head>
<body>
<table class="item-table">
<tr class="item-header"><td class="item-header" colspan="4"><a name="Tab-t_rif40_geolevels">Table: rif40.t_rif40_geolevels</a></td></tr>
<tr class="item-element"><td class="item-element" colspan="4"><span class="description">Geolevels: hierarchy of level with a geography. Use this table for INSERT/UPDATE/DELETE; use RIF40_GEOLEVELS for SELECT. In RIF40_GEOLEVELS if the user has the RIF_STUDENT role the geolevels are restricted to LADUA/DISTRICT level resolution or lower.</span></td></tr>
<tr class="item-element"><td class="item-element" colspan="4">Size: medium, Select frequency: medium, Update frequency: medium</td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Columns</td></tr>
<tr class="item-header-3"><td class="item-header-3">Name</td><td class="item-header-3">Type</td><td class="item-header-3">Constraints</td><td class="item-header-3">Description</td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-geography"><span class="pk-fk-col">geography</span></a></td><td class="item-element">VARCHAR (50)</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Geography (e.g EW2001)</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-geolevel_name"><span class="pk-col">geolevel_name</span></a></td><td class="item-element">VARCHAR (30)</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Name of geolevel. This will be a column name in the numerator/denominator tables</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-geolevel_id">geolevel_id</a></td><td class="item-element">SMALLINT</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">ID for ordering (1=lowest resolution). Up to 99 supported.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-description">description</a></td><td class="item-element">VARCHAR (250)</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Description</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-lookup_table">lookup_table</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Lookup table name. This is used to translate codes to the common names, e.g a LADUA of 00BK is "Westminster"</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-lookup_desc_column">lookup_desc_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Lookup table description column name.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-centroidxcoordinate_column">centroidxcoordinate_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Lookup table centroid X co-ordinate column name. Can also use CENTROIDSFILE instead.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-centroidycoordinate_column">centroidycoordinate_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Lookup table centroid Y co-ordinate column name.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-shapefile">shapefile</a></td><td class="item-element">VARCHAR (512)</td><td class="item-element"></td><td class="item-element"><span class="description">Location of the GIS shape file. NULL if PostGress/PostGIS used. Can also use SHAPEFILE_GEOMETRY instead,</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-centroidsfile">centroidsfile</a></td><td class="item-element">VARCHAR (512)</td><td class="item-element"></td><td class="item-element"><span class="description">Location of the GIS centroids file. Can also use CENTROIDXCOORDINATE_COLUMN, CENTROIDYCOORDINATE_COLUMN instead.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-shapefile_table">shapefile_table</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Table containing GIS shape file data (created using shp2pgsql).</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-shapefile_area_id_column">shapefile_area_id_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Column containing the AREA_IDs in SHAPEFILE_TABLE</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-shapefile_desc_column">shapefile_desc_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Column containing the AREA_ID descriptions in SHAPEFILE_TABLE</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-st_simplify_tolerance">st_simplify_tolerance</a></td><td class="item-element">INTEGER</td><td class="item-element"></td><td class="item-element"><span class="description">ST_SimplifyPreserveTopology(geom, st_simplify_tolerance) simplification parameter. Minimum length of a vector in the Douglas-Peucker alogorithm. The actual minimum length (see: ?) is normally 3-4x this parameter. Setting this parameter >20 will result in small slivers as ST_SimplifyPreserveTopology() processes on an object by object basis. Where two objects touch there is no guarantee that vectors in each object will be processed in the same way. Values of up to 1 (the projection unit is usually a metre) massively reduce points with minimal loss in resolution. Values up to 20 result in very small slivers for small objects (e.g. Census output area). Unfortunately the number of points effects the size of the GeoJSON files, so for most geolevels values of 20-500 are needed to create a sanely sized GeoJSON file. The best way to resolve the problem is to reduce to resolution of the input shapefile in ArcGIS to the amount that produces an optimal map at the highest resolution geolevel and simplify from there. It is also possible to sinmplify using the PostGIS Topolgy extension if the shapefile is well formed.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-centroids_table">centroids_table</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Table containing GIS shape file data with Arc GIS calculated population weighted centroids (created using shp2pgsql). PostGIS does not support population weighted centroids.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-centroids_area_id_column">centroids_area_id_column</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Column containing the AREA_IDs in CENTROIDS_TABLE. X and Y co-ordinates ciolumns are asummed to be named after CENTROIDXCOORDINATE_COLUMN and CENTROIDYCOORDINATE_COLUMN.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-avg_npoints_geom">avg_npoints_geom</a></td><td class="item-element">BIGINT</td><td class="item-element"></td><td class="item-element"><span class="description">Average number of points in a geometry object (AREA_ID). Used to evaluation the impact of ST_SIMPLIFY_TOLERANCE.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-avg_npoints_opt">avg_npoints_opt</a></td><td class="item-element">BIGINT</td><td class="item-element"></td><td class="item-element"><span class="description">Average number of points in a ST_SimplifyPreserveTopology() optimsed geometry object (AREA_ID). Used to evaluation the impact of ST_SIMPLIFY_TOLERANCE.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-file_geojson_len">file_geojson_len</a></td><td class="item-element">BIGINT</td><td class="item-element"></td><td class="item-element"><span class="description">File length estimate (in bytes) for conversion of the entire geolevel geometry to GeoJSON. Used to evaluation the impact of ST_SIMPLIFY_TOLERANCE.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-leg_geom">leg_geom</a></td><td class="item-element">float8 (17, 17)</td><td class="item-element"></td><td class="item-element"><span class="description">The average length (in projection units - usually metres) of a vector leg. Used to evaluation the impact of ST_SIMPLIFY_TOLERANCE.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-leg_opt">leg_opt</a></td><td class="item-element">float8 (17, 17)</td><td class="item-element"></td><td class="item-element"><span class="description">The average length (in projection units - usually metres) of a ST_SimplifyPreserveTopology() optimsed geometryvector leg. Used to evaluation the impact of ST_SIMPLIFY_TOLERANCE.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-covariate_table">covariate_table</a></td><td class="item-element">VARCHAR (30)</td><td class="item-element"></td><td class="item-element"><span class="description">Name of table used for covariates at this geolevel</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-restricted">restricted</a></td><td class="item-element">SMALLINT</td><td class="item-element"></td><td class="item-element"><span class="description">Is geolevel access rectricted by Inforamtion Governance restrictions (0/1). If 1 (Yes) then a) students cannot access this geolevel and b) if the system parameter ExtractControl=1 then the user must be granted permission by a RIF_MANAGER to extract from the database the results, data extract and maps tables. This is enforced by the RIF application.</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-resolution">resolution</a></td><td class="item-element">SMALLINT</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Can use a map for selection at this resolution (0/1)</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-comparea">comparea</a></td><td class="item-element">SMALLINT</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Able to be used as a comparison area (0/1)</span></td></tr>
<tr class="item-element"><td class="item-element"><a name="Col-t_rif40_geolevels-listing">listing</a></td><td class="item-element">SMALLINT</td><td class="item-element">NOT NULL</td><td class="item-element"><span class="description">Able to be used in a disease map listing (0/1)</span></td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Primary key</td></tr>
<tr class="item-header-3"><td class="item-header-3">Name</td><td class="item-header-3" colspan="2">Columns</td><td class="item-header-3">Description</td></tr>
<tr class="item-element"><td class="item-element">t_rif40_geolevels_pk</td><td colspan="2" class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_geolevels.html#Col-t_rif40_geolevels-geography">geography</a>, <a href="../objects/sahsuland-postgres8-t_rif40_geolevels.html#Col-t_rif40_geolevels-geolevel_name">geolevel_name</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Foreign keys</td></tr>
<tr class="item-header-3"><td class="item-header-3">Name</td><td class="item-header-3">Columns</td><td class="item-header-3">Referenced table</td><td class="item-header-3">Description</td></tr>
<tr class="item-element"><td class="item-element"><a name="FK-t_rif40_geolevels-t_rif40_geolevels_geog_fk">t_rif40_geolevels_geog_fk</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_geolevels.html#Col-t_rif40_geolevels-geography">geography</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-rif40_geographies.html#Tab-rif40_geographies">rif40_geographies</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Incoming foreign keys</td></tr>
<tr class="item-header-3"><td class="item-header-3">Name</td><td class="item-header-3">Columns</td><td class="item-header-3">Referencing table</td><td class="item-header-3">Description</td></tr>
<tr class="item-element"><td class="item-element"><a href="../objects/sahsuland-postgres8-rif40_covariates.html#FK-rif40_covariates-rif40_covariates_geolevel_fk">rif40_covariates_geolevel_fk</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-rif40_covariates.html#Col-rif40_covariates-geography">geography</a>, <a href="../objects/sahsuland-postgres8-rif40_covariates.html#Col-rif40_covariates-geolevel_name">geolevel_name</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-rif40_covariates.html#Tab-rif40_covariates">rif40_covariates</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-element"><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#FK-t_rif40_studies-t_rif40_std_comp_geolevel_fk">t_rif40_std_comp_geolevel_fk</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Col-t_rif40_studies-geography">geography</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Tab-t_rif40_studies">t_rif40_studies</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-element"><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#FK-t_rif40_studies-t_rif40_std_study_geolevel_fk">t_rif40_std_study_geolevel_fk</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Col-t_rif40_studies-geography">geography</a>, <a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Col-t_rif40_studies-comparison_geolevel_name">comparison_geolevel_name</a>, <a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Col-t_rif40_studies-study_geolevel_name">study_geolevel_name</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_studies.html#Tab-t_rif40_studies">t_rif40_studies</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-element"><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_inv_covariates.html#FK-t_rif40_inv_covariates-t_rif40_inv_cov_geolevel_fk">t_rif40_inv_cov_geolevel_fk</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_inv_covariates.html#Col-t_rif40_inv_covariates-geography">geography</a>, <a href="../objects/sahsuland-postgres8-t_rif40_inv_covariates.html#Col-t_rif40_inv_covariates-study_geolevel_name">study_geolevel_name</a></td><td class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_inv_covariates.html#Tab-t_rif40_inv_covariates">t_rif40_inv_covariates</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Indexes</td></tr>
<tr class="item-header-3"><td class="item-header-3">Name</td><td class="item-header-3" colspan="2">Columns</td><td class="item-header-3">Description</td></tr>
<tr class="item-element"><td class="item-element">t_rif40_geolevels_uk2</td><td colspan="2" class="item-element"><a href="../objects/sahsuland-postgres8-t_rif40_geolevels.html#Col-t_rif40_geolevels-geography">geography</a>, <a href="../objects/sahsuland-postgres8-t_rif40_geolevels.html#Col-t_rif40_geolevels-geolevel_id">geolevel_id</a></td><td class="item-element"><span class="description"></span></td></tr>
<tr class="item-header-2"><td class="item-header-2" colspan="4">Grants</td></tr>
<tr class="item-header-3"><td class="item-header-3">Role</td><td class="item-header-3" colspan="2">Actions</td><td class="item-header-3">&nbsp;</td></tr>
<tr class="item-element"><td class="item-element">rif_manager</td><td colspan="2" class="item-element">select, insert, delete, update</td><td class="item-element">&nbsp;</td></tr>
<tr class="item-element"><td class="item-element">rif40</td><td colspan="2" class="item-element">select, references, insert, delete, update</td><td class="item-element">&nbsp;</td></tr>
<tr class="item-element"><td class="item-element">PUBLIC</td><td colspan="2" class="item-element">select</td><td class="item-element">&nbsp;</td></tr>
</table><p>
<img src="../images/sahsuland-postgres8-t_rif40_geolevels.png" usemap="#TableGraph" align="middle" alt="Schema diagram" border="0">
<map id="TableGraph" name="TableGraph">
<area shape="rect" id="node1" href="../objects/sahsuland-postgres8-t_rif40_geolevels.html" target="detailFrame" title="t_rif40_geolevels" alt="" coords="189,121,373,540"/>
<area shape="rect" id="node3" href="../objects/sahsuland-postgres8-rif40_covariates.html" target="detailFrame" title="rif40_covariates" alt="" coords="603,5,717,131"/>
<area shape="rect" id="node4" href="../objects/sahsuland-postgres8-t_rif40_studies.html" target="detailFrame" title="t_rif40_studies" alt="" coords="569,136,751,525"/>
<area shape="rect" id="node5" href="../objects/sahsuland-postgres8-t_rif40_inv_covariates.html" target="detailFrame" title="t_rif40_inv_covariates" alt="" coords="585,531,735,685"/>
<area shape="rect" id="node2" href="../objects/sahsuland-postgres8-rif40_geographies.html" target="detailFrame" title="rif40_geographies" alt="" coords="6,239,165,423"/>
</map>

</body></html>
